"use strict";(self.webpackChunkbackoffice_frontend=self.webpackChunkbackoffice_frontend||[]).push([[63],{1063:(N,v,s)=>{s.r(v),s.d(v,{AuthModule:()=>z});var d=s(6895),p=s(1725);function R(t,r,e,o,c,i,h){try{var l=t[i](h),u=l.value}catch(m){return void e(m)}l.done?r(u):Promise.resolve(u).then(o,c)}var a=s(4719),n=s(5062),E=s(1228),A=s(1086),S=s(591),f=s(5529);const b=new n.OlP("recaptcha-language"),y=new n.OlP("recaptcha-base-url"),C=new n.OlP("recaptcha-nonce-tag"),g=(new n.OlP("recaptcha-settings"),new n.OlP("recaptcha-v3-site-key")),M_loadScript=function F(t,r,e,o,c){window.ng2recaptchaloaded=()=>{r(grecaptcha)};const i=document.createElement("script");i.innerHTML="",i.src=`${o||"https://www.google.com/recaptcha/api.js"}?render=${t}&onload=ng2recaptchaloaded${e}`,c&&(i.nonce=c),i.async=!0,i.defer=!0,document.head.appendChild(i)};let V=(()=>{class t{constructor(e,o,c,i,h){this.platformId=e,this.language=o,this.baseUrl=c,this.nonce=i,this.v3SiteKey=h,this.init(),this.ready=(0,d.NF)(this.platformId)?t.ready.asObservable():(0,A.of)()}init(){if(!t.ready&&(0,d.NF)(this.platformId)){const e=new S.X(null);t.ready=e,M_loadScript(this.v3SiteKey||"explicit",i=>e.next(i),this.language?"&hl="+this.language:"",this.baseUrl,this.nonce)}}}return t.ready=null,t.\u0275fac=function(e){return new(e||t)(n.LFG(n.Lbi),n.LFG(b,8),n.LFG(y,8),n.LFG(C,8),n.LFG(g,8))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({}),t})(),L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[V],imports:[j]}),t})(),x=(()=>{class t{constructor(e,o,c,i,h,l){this.onLoadComplete=u=>{this.grecaptcha=u,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([m,G])=>this.executeActionWithSubject(m,G)),this.actionBacklog=void 0)},this.zone=e,this.isBrowser=(0,d.NF)(c),this.siteKey=o,this.nonce=h,this.language=l,this.baseUrl=i,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new f.xQ,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new f.xQ,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(e){const o=new f.xQ;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(e,o):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([e,o]))),o.asObservable()}executeActionWithSubject(e,o){const c=i=>{this.zone.run(()=>{o.error(i),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:e,error:i})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:e}).then(i=>{this.zone.run(()=>{o.next(i),o.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:e,token:i})})},c)}catch(i){c(i)}})}init(){this.isBrowser&&("grecaptcha"in window?this.grecaptcha=grecaptcha:M_loadScript(this.siteKey,this.onLoadComplete,this.language?"&hl="+this.language:"",this.baseUrl,this.nonce))}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(n.R0b),n.LFG(g),n.LFG(n.Lbi),n.LFG(y,8),n.LFG(C,8),n.LFG(b,8))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})();function D(t,r){if(1&t&&(n.TgZ(0,"div",13),n._uU(1),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.hij(" ",e.error," ")}}const T=[{path:"login",component:(()=>{class t{constructor(e,o,c){this.authSvc=e,this.router=o,this.recaptchaV3Service=c,this.error=null}ngOnInit(){this.initForm()}initForm(){this.form=new a.nJ({email:new a.p4("",[a.kI.required]),password:new a.p4("",[a.kI.required])})}onSubmit(){var e=this;return function w(t){return function(){var r=this,e=arguments;return new Promise(function(o,c){var i=t.apply(r,e);function h(u){R(i,o,c,h,l,"next",u)}function l(u){R(i,o,c,h,l,"throw",u)}h(void 0)})}}(function*(){e.error=null,e.recaptchaV3Service.execute("login").subscribe(o=>{let c=e.form.value;c.captcha_token=o,e.authSvc.login(c).subscribe(i=>{localStorage.setItem("token",i.token),e.router.navigate(["/dashboard"]).then(()=>{window.location.reload()})},i=>{e.error=i.error.error})})})()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(E.e),n.Y36(p.F0),n.Y36(x))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:19,vars:3,consts:[[1,"container"],[1,"mt-5","offset-md-3","col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","submit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","alert alert-sm alert-danger",4,"ngIf"],["type","submit",1,"btn","rounded-pill","btn-primary",3,"disabled"],[1,"alert","alert-sm","alert-danger"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),n._uU(5,"Login"),n.qZA()(),n.TgZ(6,"div",4)(7,"form",5),n.NdJ("submit",function(){return o.onSubmit()}),n.TgZ(8,"div",6)(9,"label",7),n._uU(10,"Email"),n.qZA(),n._UZ(11,"input",8),n.qZA(),n.TgZ(12,"div",6)(13,"label",9),n._uU(14,"Password"),n.qZA(),n._UZ(15,"input",10),n.qZA(),n.YNc(16,D,2,1,"div",11),n.TgZ(17,"button",12),n._uU(18," Login "),n.qZA()()()()()()),2&e&&(n.xp6(7),n.Q6J("formGroup",o.form),n.xp6(9),n.Q6J("ngIf",o.error),n.xp6(1),n.Q6J("disabled",!o.form.valid))},dependencies:[d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[p.Bz.forChild(T),p.Bz]}),t})();var O=s(6964),B=s(2340);let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[x,{provide:g,useValue:B.N.recaptcha.siteKey}],imports:[d.ez,I,L,O.m]}),t})()}}]);